<heading id="title-bar" category="search.category"></heading>

<main>
  <div class="pure-g">
    <div class="pure-u-1-12 scrub" ng-click="search.prevPage()">
      <span class="chevron left" ng-class="search.limits.page == 0 ? 'disabled':''"></span>
    </div>
    <div id="categoryList" class="pure-u-5-6 pure-g" >
      <div ng-repeat="business in search.results" class="pure-u-1-3 searchResult" ng-click="search.focusOn(business)">
          <div class="searchResult--top">
            <p>{{business.name}}</p>
            <p>
              <h2>{{business.rating | number:1}}</h2>
              <img ng-src="{{business.rating_img_url}}"><br/>
              <strong>{{business.review_count}} reviewed</strong>
            </p>
          </div>
          <div ng-if="!search.loading" poster class="searchResult--bottom" url="business.image_url" size="'ls'"></div>
          <div class="searchResult--bottom loading" ng-if="search.loading">
            <p>loading...</p>
          </div>
      </div>
    </div>

    <div class="pure-u-1-12 scrub" ng-click="search.nextPage()">
      <span class="chevron right" ng-class="search.limits.page == search.limits.totalPages ? 'disabled':''"></span>
    </div>
  </div>
</main>
<foot ng-if="search.limits.totalPages"
      page="search.limits.page"
      pages="search.limits.totalPages"></foot>

<p>{{search.loading}}</p>
<p>{{search.limits}}</p>
